# SOL-Botプロジェクト - テスト駆動開発スプリント計画

## テスト駆動開発（TDD）アプローチについて

このスプリントでは、「テスト先行、実装後行」の原則に基づくTDDアプローチを採用しています。各機能実装の前に対応するテストケースを先に作成することで、以下の利点を得ることを目指します：

- **リグレッション（機能後退）の早期発見**: 既存機能を損なうことなく改修を進めることが可能に
- **コードの品質と保守性の向上**: テストしやすい設計は一般的に良い設計となる
- **仕様に忠実な実装**: テストが先にあることで、実装は仕様を満たすだけでなく、仕様そのものとなる
- **リファクタリングの安全性担保**: テストがあることで安全に既存コードの改善が可能

## レビュータイミングの最適化

レビュープロセスもTDDに合わせて最適化し、「テストを回しつつ、事前にある程度エラー箇所を潰す」アプローチを採用します：

- **事前テスト実行**: コードレビュー前に潜在的な問題を発見
- **エラー箇所の事前修正**: 実装前にエラーを特定して修正
- **継続的フィードバック**: 小さな単位での継続的なテスト実行によるフィードバックループの短縮

## マルチアセット対応計画

SOL/USDT以外の通貨ペアへの拡張を見据え、以下の点に注力します：

- **OrderSizingServiceのTDD実装**: ロットサイズ計算や精度対応などを先にテストケースとして整備
- **テスト先行の徹底**: すべてのマルチアセット関連機能でテストを先に作成し、エッジケースを網羅
- **CIパイプライン統合**: すべてのテストをCIに組み込み、複数ペアでの自動テスト実行を可能に

## 優先順位

現在のスプリントタスクは以下の優先順位で進めます：

1. UTIL-001: ATR/Fallback重複排除ユーティリティ (25%)
2. ALG-037: trendFollowStrategy SAR シグナル修正 (10%)
3. TST-004: backlog/sprint todo-lint Jestルール (5%)
4. PERF-004: console.log の quiet モード対応強化
5. SEC-002: Secrets Scanner pre-commit hook
6. REF-019: parameterService DI化
7. METR-001: metrics.ts 拡張実装
8. OMS-014: OrderSizingService MVP実装
9. テスト関連タスク (TST-005〜011)

## テストカバレッジ目標

- **新規コード**: 90%以上
- **既存修正コード**: 75%以上
- **エッジケース**: ゼロ値、極小値、境界値などの網羅的テスト

## Todoタスク管理の改善

TST-004タスクを通じて、以下の点を改善予定：

- タスクIDの重複チェック機能
- Progress率とHealth状態の整合性検証
- 期限切れタスクの自動検出機能

これらの改善により、タスク管理の一貫性と正確性を向上させます。 